<!DOCTYPE html>
<html lang="en">
<head>
	<title>Shower Presentation Engine</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="node_modules/shower-ribbon/styles/screen-16x10.css">

	<style>
		.center {
			text-align: center;
		}

		.black {
			background-color: #000;
		}

		.doubleColumns {
			display: flex;
			flex-direction: row;
			width: 100%;
			height: 70%;
		}

		.doubleColumns > div {
			width: 50%;
			height: 100%;
		}

		.comment,
		.slide pre .comment {
			color: rgb(99, 177, 140);
		}

		.keyword,
		.slide pre .keyword {
			color: rgb(159, 95, 226);
		}

		.string,
		.slide pre .string {
			color: rgb(226, 147, 67);
		}

		.global,
		.slide pre .global {
			color: rgb(73, 89, 226);
		}

		.tag,
		.slide pre .tag {
			color: rgb(46, 56, 148);
		}
	</style>
</head>
<body class="shower list">

	<header class="caption">
		<h1>Game "Heroes of Might and Magic" in browser</h1>
		<p>Long, difficult and incredibly interesting.</p>
	</header>

	<section class="slide" id="cover">
		<h2>Heroes in browser</h2>
		<p>Long, difficult and incredibly interesting.</p>
		<figure>
			<img class="cover" src="pictures/cover.png" alt="">
		</figure>
		<style>
			#cover {
				background: #000;
			}
			#cover h2 {
				margin: 145px 0 0;
				color: #fff;
				text-align: center;
				font-size: 70px;
				text-shadow: 0 0 30px #000;
			}
			#cover p {
				margin:10px 0 0;
				text-align:center;
				color:#FFF;
				font-style:italic;
				font-size:20px;
				text-shadow: 0 0 30px #000;
			}
			#cover p a {
				color:#FFF;
			}

			.red {
				color: #c00;
			}
		</style>
	</section>

	<section class="slide" id="about">
		<style>
			#about {
				padding-left: 50%;
			}
			#about .cover {
				left: 0;
				transform: translate(0, -50%);
			}
			.slide h2.left-inversed-header {
				color: #fff;
				position: absolute;
				left: 180px;
			}
			#about small {
				color: #555;
				font-size: 22px;
				line-height: 1.2em;
			}
		</style>
		<img class="cover" src="pictures/me.jpg" alt="">
		<h2 class="left-inversed-header">My name is</h2>
		<h2>Korotaev Aleksandr</h2>
		<ol>
			<li>Front-end at Tinkoff.ru
			</li>
			<li>Meeting meetups ü§ì</li>
			<li>Making of frontend podcast</li>
		</ol>
	</section>

	<section class="slide">
		<h2>There are 1 new HOMM-like repo on github every 2 months</h2>
		<ol>
			<li><a href="https://github.com/sfia-andreidaniel/heroes3">sfia-andreidaniel/heroes3</a></li>
			<li><a href="https://github.com/mwardrop/HOMM3Clone">mwardrop/HOMM3Clone</a></li>
			<li><a href="https://github.com/potmdehex/homm3tools">potmdehex/homm3tools</a></li>
			<li><a href="https://github.com/openhomm/openhomm">openhomm/openhomm</a></li>
			<li>‚ö†Ô∏è<a href="https://github.com/vcmi/vcmi">vcmi/vcmi</a></li>
		</ol>
		<p>But nobody can finish it, or collaborate with others</p>
	</section>

	<section class="slide">
		<h2>My goals</h2>
		<ol>
			<li>Get big and complex task</li>
			<li class="next">Make something interesting</li>
			<li class="next">Stop playing in videogames :)</li>
		</ol>
	</section>

	<section class="slide" id="beautiful">
		<h2 class="shout shrink">4. make beautiful</h2>
		<figure>
			<img class="cover" src="pictures/beautiful.jpg" alt="">
		</figure>
		<style>
			#beautiful {
				background: #000;
			}
			#beautiful h2 {
				color: #fff;
				text-align: center;
				text-shadow: 0 0 30px #000;
			}
		</style>
	</section>

	<section class="slide" id="beginning">
		<figure>
			<img class="cover" src="pictures/begining.png" alt="">
		</figure>

		<style>
			#beginning h2 {
				color: #fff;
				text-shadow: 0 0 30px #000;
			}
		</style>
	</section>

	<section class="slide">
		<h2>Typical parts of any game</h2>
		<ol>
			<li>Model (NPC, map, state)</li>
			<li>Game loop</li>
			<li>User input handlers (mouse, joystick...)</li>
			<li>Renderer</li>
		</ol>
	</section>

	<section class="slide">
		<h2>In code it looks like</h2>
		<pre>
			<code><span class="keyword">const</span> me <span class="global">=</span> {name: <span class="string">'Alex'</span>, left: <span class="string">0</span>}</code>
			<code>...</code>
			<code><span class="global">setInterval</span>(() <span class="keyword">=></span> update(), <span class="string">1000</span>)</code>
			<code>...</code>
			<code><span class="global">window</span>.addEventListener(<span class="string">'keyup'</span>, () <span class="keyword">=></span> me.left++)</code>
			<code>...</code>
			<code><span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> draw())</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Model</h2>
		<pre>
			<code><mark><span class="keyword">const</span> me <span class="global">=</span> {name: <span class="string">'Alex'</span>, left: <span class="string">0</span>}</mark></code>
			<code>...</code>
			<code><span class="global">setInterval</span>(() <span class="keyword">=></span> update(), <span class="string">1000</span>)</code>
			<code>...</code>
			<code><span class="global">window</span>.addEventListener(<span class="string">'keyup'</span>, () <span class="keyword">=></span> me.left++)</code>
			<code>...</code>
			<code><span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> draw())</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Game loop</h2>
		<pre>
			<code><span class="keyword">const</span> me <span class="global">=</span> {name: <span class="string">'Alex'</span>, left: <span class="string">0</span>}</code>
			<code>...</code>
			<code><mark><span class="global">setInterval</span>(() <span class="keyword">=></span> update(), <span class="string">1000</span>)</mark></code>
			<code>...</code>
			<code><span class="global">window</span>.addEventListener(<span class="string">'keyup'</span>, () <span class="keyword">=></span> me.left++)</code>
			<code>...</code>
			<code><span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> draw())</code>
		</pre>
	</section>

	<section class="slide">
		<h2>User input handling</h2>
		<pre>
			<code><span class="keyword">const</span> me <span class="global">=</span> {name: <span class="string">'Alex'</span>, left: <span class="string">0</span>}</code>
			<code>...</code>
			<code><span class="global">setInterval</span>(() <span class="keyword">=></span> update(), <span class="string">1000</span>)</code>
			<code>...</code>
			<code><mark><span class="global">window</span>.addEventListener(<span class="string">'keyup'</span>, () <span class="keyword">=></span> me.left++)</mark></code>
			<code>...</code>
			<code><span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> draw())</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Renderer</h2>
		<pre>
			<code><span class="keyword">const</span> me <span class="global">=</span> {name: <span class="string">'Alex'</span>, left: <span class="string">0</span>}</code>
			<code>...</code>
			<code><span class="global">setInterval</span>(() <span class="keyword">=></span> update(), <span class="string">1000</span>)</code>
			<code>...</code>
			<code><span class="global">window</span>.addEventListener(<span class="string">'keyup'</span>, () <span class="keyword">=></span> me.left++)</code>
			<code>...</code>
			<code><mark><span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> draw())</mark></code>
		</pre>
	</section>

	<section class="slide">
		<h2 class="shout shrink">Short development story</h2>
	</section>

	<section class="slide">
		<h2>From start we have</h2>
		<ol>
			<li>Original game</li>
			<li>Maps editor</li>
			<li><a href="https://vk.com/fizmig">FizMig</a> &mdash; big specification about all game mechanics</li>
			<li>A lot of russian forums with guys who made mods or disassembling for many years</li>
			<li>Resources unpacker üòé</li>
		</ol>
	</section>

	<section class="slide center">
		<h2>At first I draw grass field</h2>
		<img src="pictures/canvas_first.png" alt="">
	</section>

	<section class="slide center">
		<h2>Further &mdash; data</h2>
		<img src="pictures/json.png" alt="">
		<p>Maps, NPCs, perks, magic...</p>
	</section>

	<section class="slide center">
		<h2>At last &mdash; algorithms...</h2>
		<img src="pictures/starting.jpg" alt="">
	</section>

	<section class="slide center">
		<img src="pictures/grabli.jpg" alt="">
	</section>



	<section class="slide">
		<h2 class="shout shrink"><span class="red">#1</span> Maps parsing</h2>
	</section>

	<section class="slide">
		<img class="cover" src="pictures/map_editor.jpg" alt="">
	</section>

	<section class="slide">
		<img class="cover" src="pictures/hex.png" alt="">
	</section>

	<section class="slide">
		<img class="cover" src="pictures/binnary.png" alt="">
	</section>

	<section class="slide">
		<h2>I choose <a href="https://github.com/potmdehex/homm3tools">homm3tools</a>...</h2>
		<p>It is a bunch of tools and libraries to work with HoMM 3 maps</p>
		<ol>
			<li>Maps parser</li>
			<li>Random maps generator</li>
			<li>Text render using trees</li>
			<li>And, surprisingly, "snake" game</li>
		</ol>
	</section>

	<section class="slide">
		<img class="cover" src="pictures/h3msnake.gif" alt="">
	</section>

	<section class="slide">
		<h2>...and I made my own convertor</h2>
		<p><a href="https://github.com/lekzd/h3m-map-convertor">h3m-map-convertor</a></p>
		<img src="pictures/convertor.png" alt="">
	</section>

	<section class="slide">
		<style>
			#array_objects {
				margin-top: 100px;
				font-size: 55px;
				text-align: center;
			}
		</style>
		<h2>Data became more and more, the number of objects grew...</h2>
		<div id="array_objects">
			<img src="pictures/avsmarl.png" alt="">
			<img src="pictures/avsarna0.png" alt="">
			<img src="pictures/avmalch0.png" alt="">
			<img src="pictures/avswar20.png" alt="">
			<img src="pictures/avxredw.png" alt="">
		</div>
	</section>

	<section class="slide black">
		<img class="cover" src="pictures/js_slow.jpg" alt="">
	</section>

	<section class="slide">
		<h2 class="shout shrink">‚ùÑÔ∏èFreezes!‚ùÑÔ∏è</h2>
	</section>

	<section class="slide">
		<h2 class="shout shrink"><span class="red">#1</span> Map drawing</h2>
	</section>

	<section class="slide">
		<h2>Canvas it is not DOM</h2>
		<pre>
			<code><span class="keyword">const</span> ctx <span class="global">=</span> canvas.getContext(<span class="string">'2d'</span>)</code>
			<code> </code>
			<code>ctx.drawImage(hero, <span class="string">0</span>, <span class="string">0</span>)</code>
			<code><mark>ctx.clearRect(<span class="string">0</span>, <span class="string">0</span>, <span class="string">100</span>, <span class="string">100</span>)</mark></code>
			<code>ctx.drawImage(hero, <span class="string">100</span>, <span class="string">0</span>)</code>
			<code><mark>ctx.clearRect(<span class="string">0</span>, <span class="string">0</span>, <span class="string">100</span>, <span class="string">100</span>)</mark></code>
			<code>ctx.drawImage(hero, <span class="string">200</span>, <span class="string">0</span>)</code>
		</pre>
	</section>

	<section class="slide">
		<h2>In case of we have a grass below hero...</h2>
		<pre>
			<code><span class="keyword">const</span> ctx <span class="global">=</span> canvas.getContext(<span class="string">'2d'</span>)</code>
			<code> </code>
			<code>ctx.drawImage(hero, <span class="string">0</span>, <span class="string">0</span>)</code>
			<code><mark>ctx.drawImage(grass, <span class="string">0</span>, <span class="string">0</span>)</mark></code>
			<code>ctx.drawImage(hero, <span class="string">100</span>, <span class="string">0</span>)</code>
			<code><mark>ctx.drawImage(grass, <span class="string">100</span>, <span class="string">0</span>)</mark></code>
			<code>ctx.drawImage(hero, <span class="string">200</span>, <span class="string">0</span>)</code>
		</pre>
	</section>

	<section class="slide center">
		<style>

			@keyframes layer1 {
				0% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
				50% {
					transform:
						translate3d(-100px, -100px, -50px)
						rotate3d(0, 1, 0, 25deg)
				}
				100% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
			}

			@keyframes layer2 {
				0% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
				50% {
					transform:
						translate3d(50px, 0, 0)
						rotate3d(0, 1, 0, 25deg)
				}
				100% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
			}

			@keyframes layer3 {
				0% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
				50% {
					transform:
						translate3d(250px, 100px, 50px)
						rotate3d(0, 1, 0, 25deg)
				}
				100% {
					transform:
						translate3d(0, 0, 0)
						rotate3d(0, 1, 0, 0deg)
				}
			}

			.layers {
				position: relative;
				max-width: 100%;
				max-height: 100%;

				perspective: 800px;
			}

			.layers img {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: auto;

				animation-duration: 4s;
				animation-delay: 1s;
				animation-iteration-count: infinite;

				transition: transform linear .2s;
			}

			.active .layer1 {
				animation-name: layer1;
			}

			.active .layer2 {
				animation-name: layer2;
			}

			.active .layer3 {
				animation-name: layer3;
			}
		</style>

		<div class="layers">
			<img class="layer1" src="pictures/layer1.png">
			<img class="layer2" src="pictures/layer2.png">
			<img class="layer3" src="pictures/layer3.png">
		</div>
	</section>

	<section class="slide">
		<h2>I just use 3 &lt;canvas&gt;</h2>
		<pre>
			<code><span class="tag">&lt;canvas</span> id=<span class="string">"terrain"</span><span class="tag">&gt;</span></code>
			<code><span class="tag">&lt;canvas</span> id=<span class="string">"objects"</span><span class="tag">&gt;</span></code>
			<code><span class="tag">&lt;canvas</span> id=<span class="string">"ui"</span><span class="tag">&gt;</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Terrain drawing algorithm</h2>
		<ol>
			<li>Get tile texture by type</li>
			<li>Draw it with offset and mirroring</li>
			<li>Overlay rivers</li>
			<li>Overlay roads</li>
			<li>At least we have extra grounds...</li>
		</ol>
	</section>

	<section class="slide">
		<style>
			.terrain {
				display: inline-block;
				width: 64px;
				height: 384px;
				margin-right: 32px;
			}

			.terrain-result {
				display: flex;
				flex-direction: row;
				flex-wrap: wrap;
				background: url(pictures/layer1.png);
				background-size: cover;
			}
			.terrain-cell {
				width: 33%;
				border: 3px dashed #fff;
				position: relative;
				margin-right: -3px;
				margin-bottom: -3px;
			}
		</style>
		<h2>Draw it once and store in cash</h2>
		<div class="doubleColumns">
			<div>
				<div class="terrain" style="background: url(pictures/terr_02.jpg)"></div>
				<div class="terrain" style="background: url(pictures/terr_08.jpg)"></div>
				<div class="terrain" style="background: url(pictures/dirt_road.png)"></div>
			</div>
			<div class="terrain-result">
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
				<div class="terrain-cell"></div>
			</div>
		</div>
	</section>

	<section class="slide">
		<style>

			@keyframes dragging {
				0% {
					transform: translateX(0);
				}
				20% {
					transform: translateX(-64px);
				}
				40% {
					transform: translateX(-128px);
				}
				60% {
					transform: translateX(-192px);
				}
				80% {
					transform: translateX(-256px);
				}
				100% {
					transform: translateX(-320px);
				}
			}

			@keyframes offset {
				0% {
					left: 0;
					background-position-x: 0;
				}
				20% {
					left: 0;
					background-position-x: 0;
				}
				40% {
					left: 64px;
					background-position-x: -64px;
				}
				60% {
					left: 128px;
					background-position-x: -128px;
				}
				80% {
					left: 192px;
					background-position-x: -192px;
				}
				100% {
					left: 256px;
					background-position-x: -256px;
				}
			}

			.mapFrame {
				position: relative;
				width: 50%;
				height: 100%;
				margin: auto;
			}

			.mapFrame .mapFrame-border {
				position: absolute;
				left: 0;
				top: 0;
				right: 0;
				bottom: 0;
				outline: 5px solid #c00;
			}

			.map {
				position: absolute;
				left: 0;
				top: 0;
				width: calc(100% + 64px);
				height: 100%;
				background: url(pictures/layer1.png);
			}

			.active .map {
				animation-name: dragging, offset;
				animation-delay: 1s;
				animation-duration: 5s;
				animation-iteration-count: infinite;
				animation-timing-function: linear, step-start;
			}

			.description {
				width: 50%;
				height: 100%;
			}
		</style>

		<h2>How to drag map smoothly</h2>

		<div class="doubleColumns">
			<div class="description">
				<ol>
					<li>
						Move map using </br>
						<mark>transform: translate()</mark>
					</li>
					<li>
						Every 32 pixels </br>
						<mark>shift left on 32px</mark></br>
						<mark>draw another tiles line</mark>
					</li>
				</ol>

				<p>
					The illusion of a continuous block </br>
					you can see this trick on map services
				</p>
			</div>
			<div class="mapFrame">
				<div class="map"></div>
				<div class="mapFrame-border"></div>
			</div>
		</div>
	</section>

	<section class="slide center">
		<h2 class="shout shrink">
			<span class="red">#2</span> Objects drawing
		</h2>
	</section>

	<section class="slide center">
		<h2>Objects drawing</h2>
		<style>

			.objectsDraw {
				position: relative;
				width: 350px;
				height: 350px;
				margin: auto;
			}

			.slide table.objectsDraw_table {
				border: 3px dashed #777;
				border-collapse: collapse;
				width: 100%;
				height: 100%;
				table-layout: fixed;
				margin-left: 0;
			}

			.slide table.objectsDraw_table td {
				border: 3px dashed #777;
				background: transparent;
			}

			.objectsDraw_arrow {
				position: absolute;
				left: 0;
				bottom: -2px;
				border-top: 5px solid;
				width: 350px;
			}

			.objectsDraw_arrow:after {
				content: '';
				position: absolute;
				left: -17px;
				top: -12px;
				border: 10px solid;
				border-top-color: transparent;
				border-left-color: transparent;
				border-bottom-color: transparent;
			}

			.objectsDraw_hor {
				color: red;
			}

			.objectsDraw_vert {
				color: blue;
				transform: rotate(90deg);
				transform-origin: 100% 100%;
				left: -3px;
			}

			.objectArena {
				position: absolute;
				bottom: 86px;
				right: 0;
				background: url(pictures/avsarna0.png) rgba(240, 255, 28, 0.22);
				width: 96px;
				height: 96px;
				transform: scale(2.75, 2.75);
				transform-origin: 100% 100%;
			}

			.objectTower {
				position: absolute;
				bottom: 0;
				right: 0;
				background: url(pictures/avxredw.png) rgba(255, 0, 3, 0.22);
				width: 64px;
				height: 96px;
				transform: scale(2.75, 2.75);
				transform-origin: 100% 100%;
			}
		</style>
		<div class="objectsDraw">
			<table class="objectsDraw_table">
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</table>
			<div class="objectsDraw_arrow objectsDraw_hor"></div>
			<div class="objectsDraw_arrow objectsDraw_vert"></div>

			<div class="objectArena"></div>
			<div class="objectTower"></div>
		</div>
	</section>

	<section class="slide">
		<h2>Drawing objects algorithm</h2>
		<ol>
			<li>Sort objects array by bottom Y coordinate</li>
			<li>Filter it by intersection of visible frame</li>
			<li>...a lot of conditions...</li>
			<li>Draw object texture</li>
			<li>Draw player flag if needed</li>
		</ol>
		<p>And objects count on map maybe over 9000!</p>
	</section>

	<section class="slide">
		<h2>Lets make a tree!</h2>
		<div class="doubleColumns">
			<div>
				<ol>
					<li>Each branch - object Y</li>
					<li>Objects on branch <br> sorted by X</li>
				</ol>
				<p>
					<span class="red">+</span> visible objects clipping <br>
					<span class="red">+</span> correct z-index ovelaying <br>
					<span class="red">+</span> cheaper iteration <br>
				</p>
			</div>
			<div>
				<pre>
					<code><span class="keyword">const</span> renderTree <span class="global">=</span> {</code>
					<code>    <span class="global">32</span>: [object, object, ...]</code>
					<code>    <span class="global">64</span>: [object, object]</code>
					<code>    <span class="global">96</span>: [object, object, ...]</code>
					<code>    <span class="global">128</span>: [object]</code>
					<code>}</code>
				</pre>
			</div>
		</div>

	</section>

	<section class="slide">
		<h2>In case of look deeper to object draw function...</h2>
		<pre>
			<code><span class="keyword">const</span> object <span class="global">=</span> getObject(id)</code>
			<code><span class="keyword">const</span> {x, y} <span class="global">=</span> getAnimationFrame(object)</code>
			<code><span class="keyword">const</span> offsetleft <span class="global">=</span> getMapLeft()</code>
			<code><span class="keyword">const</span> offsetTop <span class="global">=</span> getMapTop()</code>
			<code> </code>
			<code>context.drawImage(object.texture, x <span class="global">-</span> offsetleft, ...</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Finally, drawing may be simplified to:</h2>
		<pre>
			<code>context.<mark>drawImage</mark>(object.texture, x, y)</code>
		</pre>
		<p>And we simply add it in Render tree!</p>
		<pre>
			<code><span class="keyword">const</span> drawer <span class="global">=</span> <mark>context.drawImage.bind</mark>(context, ...)</code>
			<code>renderTree.add(x, y, drawer)</code>
		</pre>
		<p>And we got well <mark>performance boost!</mark></p>
	</section>

	<section class="slide black">
		<img class="cover" src="pictures/movement.gif" alt="">
	</section>

	<section class="slide center">
		<h2>Some geometry</h2>
		<style>

			.grass {
				position: relative;
				width: 350px;
				height: 350px;
				margin: auto;
			}

			.slide table.grass_table {
				border: 3px dashed #777;
				border-collapse: collapse;
				width: 100%;
				height: 100%;
				table-layout: fixed;
				margin-left: 0;
			}

			.slide table.grass_table td {
				border: 3px dashed #777;
				background: transparent;
			}

			.grass_arrow {
				position: absolute;
				left: 0;
				top: -2px;
				border-top: 5px solid;
				width: 350px;
			}

			.grass_arrow:after {
				content: '';
				position: absolute;
				right: -17px;
				top: -12px;
				border: 10px solid;
				border-top-color: transparent;
				border-right-color: transparent;
				border-bottom-color: transparent;
			}

			.grass_hor {
				color: red;
			}

			.grass_vert {
				color: blue;
				transform: rotate(45deg);
				transform-origin: 0 0;
			}

			.grass_vert_long {
				color: blue;
				transform: rotate(45deg);
				transform-origin: 0 0;
				width: 493px;
			}
		</style>
		<div class="grass">
			<table class="grass_table">
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</table>
			<div class="grass_arrow grass_hor"></div>
			<div class="grass_arrow grass_vert"></div>
		</div>
	</section>

	<section class="slide center">
		<h2>Some <mark>Hero</mark>ometry üèá</h2>
		<div class="grass">
			<table class="grass_table">
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</table>
			<div class="grass_arrow grass_hor"></div>
			<div class="grass_arrow grass_vert_long"></div>
		</div>
	</section>

	<section class="slide">
		<h2>How to reach similar speed</h2>
		<br>
		<div class="grass" style="margin-left: 0">
			<h2 class="grass_arrow" style="color: red">4 steps</h2>
			<h2 class="grass_arrow" style="color: blue; width: 141%; top: 150px;">~6 steps</h2>
		</div>
	</section>

	<section class="slide center">
		<div class="doubleColumns">
			<div style="font-size: 30px">
				<h3><mark>setTimeout</mark>(() => setTimeout())</h3>
				<h3>vs</h3>
				<h3><mark>setInterval</mark>()</h3>
				<h3>vs</h3>
				<h3><mark>requestAnimationFrame</mark>()</h3>
			</div>
			<div>
				<div class="task">Task</div>
				<div class="task">setTimeout()</div>
				<div class="task">Task</div>
				<div class="task">setTimeout()</div>
			</div>
		</div>
	</section>

	<section class="slide center">
		<style>
			.task {
				width: 250px;
				margin: 10px auto;
				padding: 10px;
				border: 4px dashed #ffc554;
				background: rgba(255, 197, 84, 0.51);
			}
			.microtask {
				height: 60px;
				border: 4px dashed #ff813a;
				background: rgba(255, 91, 18, 0.51);
			}
		</style>

		<div class="doubleColumns">
			<div>
				<br>
				<br>
				<h2>Promise()</h2>
			</div>
			<div>
				<div class="task">Task</div>
				<div class="task">Task
					<div class="microtask">Microtask</div>
				</div>
			</div>
		</div>

		<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">Read more in Jake Archibald's article</a>
	</section>

	<section class="slide">
		<h2>Get them all!</h2>
		<pre>
			<code><span class="keyword">new</span> <span class="global">Promise</span>(resolve <span class="keyword">=></span> {</code>
			<code>    <span class="global">setTimeout</span>(() <span class="keyword">=></span> {</code>
			<code>        <mark>// animation calculations</mark></code>
			<code>        <span class="global">requestAnimationFrame</span>(() <span class="keyword">=></span> <mark>/* drawing */</mark>)</code>
			<code>        resolve()</code>
			<code>    })</code>
			<code>})</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Lets make a sequence</h2>
		<pre>
			<code>startAnimation()</code>
			<code>    .then(step)</code>
			<code>    .then(step)</code>
			<code>    .then(step)</code>
			<code>    .then(step)</code>
			<code>    .then(doAction)</code>
			<code>    .then(endAnimation)</code>
		</pre>
	</section>

	<section class="slide">
		<h2>But better - make declarative abstraction</h2>
		<pre>
			<code><span class="global">AsyncSequence</span>([</code>
			<code>    startAnimation, [</code>
			<code>        step</code>
			<code>        step</code>
			<code>        ...],</code>
			<code>    doAction,</code>
			<code>    endAnimation</code>
			<code>])</code>
		</pre>
	</section>

	<section class="slide center">
		<h2 class="shout shrink"><span class="red">#3</span> Data storing</h2>
	</section>

	<section class="slide center">
		<h2>Map &mdash; it is a grid</h2>
		<img src="pictures/tiles.png" alt="">
		<p>* to be exact &mdash; tiles</p>
	</section>

	<section class="slide">
		<h2>Each tile is</h2>
		<ol>
			<li>Type (water, ground, tree)</li>
			<li>Passability/walking cost</li>
			<li>Event</li>
			<li>"Who is owner" sign</li>
			<li>...</li>
		</ol>
	</section>

	<section class="slide">
		<h2>In code it looks like</h2>
		<pre>
			<code><span class="keyword">const</span> map <span class="global">=</span> [</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    ...</code>
			<code>]</code>
			<code><span class="keyword">const</span> tile <span class="global">=</span> <mark>map[1][3]</mark></code>
		</pre>
	</section>

	<section class="slide black">
		<img class="cover" src="pictures/pathfinding.png" alt="">
	</section>

	<section class="slide black">
		<img class="cover" src="pictures/pathfinding.gif" alt="">
	</section>

	<section class="slide">
		<h2>To get one tile attribute</h2>
		<ol>
			<li>Query tiles array</li>
			<li>Query array of arrays for row</li>
			<li>Query tile object</li>
			<li>Query tile property</li>
		</ol>
	</section>

	<section class="slide">
		<h2>Storing everything in one place &mdash; is slow!</h2>
		<pre>
			<code><span class="keyword">const</span> tile <span class="global">=</span> {</code>
			<code class="comment">    // for renderer</code>
			<code>    render: {...},</code>
			<code class="comment">    // for pathfinding</code>
			<code>    passability: {...},</code>
			<code class="comment">    // data that needed <mark>not so often</mark></code>
			<code>    otherStuff: {...},</code>
			<code>}</code>
		</pre>
	</section>

	<section class="slide center">
		<style>
			.terrain_map {
				margin-top: 70px;
				font-size: 55px;
				text-align: center;
			}
			.terrain_map b {
				display: inline-block;
				width: 55px;
				background: #e5c793;
			}
			.pathfind_map {
				margin-top: 70px;
				font-size: 55px;
				text-align: center;
			}
			.pathfind_map b {
				display: inline-block;
				width: 55px;
			}
		</style>
		<h2>Array is the most fast storage</h2>
		<div class="terrain_map">[<b>üå≤</b>,<b>&nbsp;</b>,<b>üå≥</b>,<b>üå≤</b>,<b>&nbsp;</b>,<b>&nbsp;</b>,<b>üî•</b>,<b>üå≤</b>]</div>
		<div class="pathfind_map">[<b>1</b>,<b>0</b>,<b>1</b>,<b>1</b>,<b>0</b>,<b>0</b>,<b>1</b>,<b>1</b>]</div>
	</section>

	<section class="slide center">
		<style>
			.array_big {
				font-size: 35px;
				text-align: center;
			}
		</style>
		<h2>Better make all calculations previously</h2>
		<div class="array_big">tiles [<mark>{...}</mark>, {...}, {...}]</div>
		<div class="array_big red">+</div>
		<div class="array_big">objects [<mark>{...}</mark>, {...}, {...}]</div>
		<div class="array_big red">=</div>
		<div class="array_big">[<mark>1</mark>, 0, 2]</div>
	</section>

	<section class="slide">
		<h2>Make different arrays</h2>
		<table>
			<tr>
				<td>Renderer loop</td>
				<td>drawing function array</td>
			</tr>
			<tr>
				<td>Pathfinding</td>
				<td>numbers array</td>
			</tr>
			<tr>
				<td>Objects-to-tile association</td>
				<td>strings array</td>
			</tr>
			<tr>
				<td>Additional tile properties</td>
				<td>numbers array</td>
			</tr>
			<tr>
				<td>For game logic</td>
				<td>Objects Map with IDs</td>
			</tr>
		</table>
		<p>–û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –≤ –±—ã—Å—Ç—Ä—ã–µ</p>
		<p>At least we have only problem with arrays updating</p>
	</section>

	<section class="slide">
		<h2>How to avoid array of arrays</h2>
		<pre>
			<code><span class="keyword">const</span> map <span class="global">=</span> [</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    [{...}, {...}, {...}, {...}, {...}, {...}],</code>
			<code>    ...</code>
			<code>]</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Flatten array, got performance boost ~50%</h2>
		<pre>
			<code><span class="keyword">const</span> map <span class="global">=</span> [{...}, {...}, {...}, {...}, ...]</code>
			<code> </code>
			<code><span class="keyword">const</span> tile <span class="global">=</span> map[y <span class="global">*</span> width <span class="global">+</span> x]</code>
		</pre>
		<a href="https://jsperf.com/2d-array-of-numbers/2" target="_blank">
			<img src="/pictures/flat_array_perf.png" alt="" width="100%">
		</a>
	</section>

	<section class="slide">
		<h2>Try to get make it faster</h2>
		<pre>
			<code><span class="keyword">const</span> map <span class="global">=</span> [{...}, {...}, {...}, {...}, ...]</code>
			<code> </code>
			<code><span class="keyword">const</span> tile <span class="global">=</span> map[y <mark>*</mark> width <span class="global">+</span> x]</code>
			<code>map.forEach((value, index) <span class="keyword">=></span> {</code>
			<code>    <span class="keyword">const</span> y <span class="global">=</span> <mark>Math.floor</mark>(index <mark>/</mark> width)</code>
			<code>    <span class="keyword">const</span> x <span class="global">=</span> index <span class="global">-</span> (y <mark>*</mark> width)</code>
			<code>})</code>
		</pre>
	</section>

	<section class="slide center">
		<h2>Power of 2!</h2>

		<div class="array_big">
			2<sup>n</sup> <span class="global">===</span> 2 <mark><<</mark> n
		</div>
		<p class="array_big">
			<span class="global">Math</span>.floor(X <span class="global">/</span> 2<sup>n</sup>) <span class="global">===</span> X <mark>>></mark> n
		</p>
		<a href="https://jsperf.com/division-vs-bit-right-shift/3" target="_blank">
			<img src="/pictures/biwise_perf.png" alt="" width="100%">
		</a>
	</section>

	<section class="slide">
		<h2>Dive to bitwise shifts</h2>
		<pre>
			<code><span class="keyword">const</span> map <span class="global">=</span> [{...}, {...}, {...}, {...}, ...]</code>
			<code><span class="keyword">const</span> <mark>powerOfTwo</mark> <span class="global">=</span> <span class="global">Math</span>.ceil(<span class="global">Math</span>.log2(width))</code>
			<code> </code>
			<code><span class="keyword">const</span> tile <span class="global">=</span> map[y <mark><< powerOfTwo</mark> <span class="global">+</span> x]</code>
			<code>map.forEach((value, index) <span class="keyword">=></span> {</code>
			<code>    <span class="keyword">const</span> y <span class="global">=</span> index <mark>>> powerOfTwo</mark></code>
			<code>    <span class="keyword">const</span> x <span class="global">=</span> index - (y <mark><< powerOfTwo</mark>)</code>
			<code>})</code>
		</pre>
	</section>

	<section class="slide center">
		<h2>Power of two on videocards</h2>
		<img src="pictures/mipmaps.jpg" alt="">
	</section>

	<section class="slide">
		<h2>–¢–∞–∫ –ø–æ–ª—É—á–∏–ª—Å—è Grid</h2>
		<h2>As a result &mdash; Grid</h2>
		<pre>
			<code><span class="keyword">const</span> grid = <span class="keyword">new</span> Grid(<span class="string">32</span>)</code>
			<code> </code>
			<code><span class="keyword">const</span> tile = grid.get(x, y)</code>
			<code>grid.forEach((value, x, y) <span class="keyword">=></span> {})</code>
		</pre>
		<p>
			- foursquare grids only <br>
			- inefficient for grids with size more than 265 cells
		</p>
	</section>

	<section class="slide">
		<h2 class="shout shrink"><span class="red">#3</span> UI on Canvas</h2>
	</section>

	<section class="slide">
		<h2>From start I made UI-elements from classes</h2>
		<pre>
			<code><span class="keyword">const</span> <mark>okButton</mark> = <span class="keyword">new</span> <span class="global">Buttton</span>(<span class="string">0</span>, <span class="string">10</span>, <span class="string">'Ok'</span>)</code>
			<code><mark>okButton</mark>.addEventListener(<span class="string">'click'</span>, () <span class="keyword">=></span> { ... })</code>
			<code><span class="keyword">const</span> <mark>cancellButton</mark> = <span class="keyword">new</span> <span class="global">Buttton</span>(<span class="string">0</span>, <span class="string">10</span>, <span class="string">'Cancel'</span>)</code>
			<code><mark>cancellButton</mark>.addEventListener(<span class="string">'click'</span>, () <span class="keyword">=></span> { ... })</code>
		</pre>
	</section>

	<section class="slide">
		<h2>By the way parameters count is growing...</h2>
		<pre>
			<code><span class="keyword">const</span> <mark>okButton</mark> <span class="global">=</span> <span class="keyword">new</span> <span class="global">Buttton</span>({</code>
			<code>    left: <span class="string">0</span>,</code>
			<code>    top: <span class="string">10</span>,</code>
			<code>    onClick: () <span class="keyword">=></span> { ... }</code>
			<code>})</code>
			<code><span class="keyword">const</span> <mark>cancellButton</mark> = <span class="keyword">new</span> <span class="global">Buttton</span>({...})</code>
		</pre>
	</section>

	<section class="slide">
		<h2>–ò—Ö —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—å –≤—Å–µ –±–æ–ª—å—à–µ, –ø–æ—è–≤–∏–ª—Å—è JSON...</h2>
		<h2>–ò—Ö —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—å –≤—Å–µ –±–æ–ª—å—à–µ, –ø–æ—è–≤–∏–ª—Å—è JSON...</h2>
		<pre>
			<code>[</code>
			<code>    {</code>
			<code>         id: <mark class="string">'okButton'</mark>,</code>
			<code>         options: {</code>
			<code>             left: <span class="string">0</span>,</code>
			<code>             top: <span class="string">10</span>,</code>
			<code>             onClick: () <span class="keyword">=></span> { ... }</code>
			<code>         },</code>
			<code>    },</code>
			<code>...</code>
			<code>]</code>
		</pre>
	</section>

	<section class="slide">
		<h2>–ù–æ –¥–∞–ª–µ–µ —è –≤—Å–ø–æ–º–Ω–∏–ª, —á—Ç–æ –µ—Å—Ç—å XML</h2>
		<pre>
			<code><span class="tag">&lt;button</span> id=<span class="string">"<mark>okButton</mark>"</span></code>
			<code>        left=<span class="string">"0"</span></code>
			<code>        top=<span class="string">"10"</span></code>
			<code>        onClick=<span class="string">"<mark>{doSomething()}</mark>"</span></code>
			<code><span class="tag">/&gt;</span></code>
		</pre>
		<p>–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–Ω —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ JSON —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–ª–∞–π–¥–∞</p>
	</section>

	<section class="slide">
		<pre>
			<code><span class="tag">&lt;group</span> id=<span class="string">"main"</span> ... <span class="tag">&gt;</span></code>
			<code>    <span class="tag">&lt;group</span> id=<span class="string">"header"</span> ... <span class="tag">&gt;</span></code>
			<code>        <span class="tag">&lt;text-block</span> ... <span class="tag">/&gt;</span></code>
			<code>        <span class="tag">&lt;button</span> ... <span class="tag">/&gt;</span></code>
			<code>    <span class="tag">&lt;/group</span><span class="tag">&gt;</span></code>
			<code>    <span class="tag">&lt;group</span> id=<span class="string">"footer"</span> ... <span class="tag">&gt;</span></code>
			<code>        <span class="tag">&lt;any-component</span> ... <span class="tag">/&gt;</span></code>
			<code>        <span class="tag">&lt;button</span> ... <span class="tag">/&gt;</span></code>
			<code>    <span class="tag">&lt;/group</span><span class="tag">&gt;</span></code>
			<code><span class="tag">&lt;/group</span><span class="tag">&gt;</span></code>
		</pre>
	</section>

	<section class="slide center">
		<h2>–ü—Ä—è–º–æ –∫–∞–∫ –≤ <a href="https://github.com/Flipboard/react-canvas">react-canvas</a></h2>
		<img src="pictures/flip_ui.gif" alt="">
	</section>


	<section class="slide">
		<h2 class="shout shrink">–ö–∞–∫ —ç—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
	</section>

	<section class="slide center">
		<img src="pictures/blocks.gif" style="height: 500px; position: relative; top: -70px;" alt="">
	</section>

	<section class="slide center">
		<h2>–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤</h2>
		<img src="/pictures/go_to_reso.png" alt="">
	</section>

	<section class="slide center">
		<h2>#1 –ü–æ–∏—Å–∫ –ø—É—Ç–∏ &mdash; –∞–ª–≥–æ—Ä–∏—Ç–º <a href="https://ru.wikipedia.org/wiki/A*">A*</a></h2>
		<div class="doubleColumns">
			<div>
				<img src="/pictures/astar.png" alt="" height="350px">
			</div>
			<div>
				<img src="/pictures/astar 2.png" alt="" height="350px">
			</div>
		</div>
	</section>

	<section class="slide center">
		<h2>#2 –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è</h2>
		<p>–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–∑–∏—Ü–∏—é –≥–µ—Ä–æ—è –≤ –¥–µ—Ä–µ–≤–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏</p>
		<div class="doubleColumns">
			<div>
				<img src="/pictures/render_tree.png" alt="" height="300px"></div>
			<div>
				<img src="/pictures/render_tree_after.png" alt="" height="300px"></div>
		</div>
	</section>

	<section class="slide">
		<h2>#3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ</h2>
		<div class="doubleColumns">
			<div>
				<ol>
					<li>
						–î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ –∫–∞—Ä—Ç–µ –∏ –ø–æ–ª—É—á–∞–µ–º ID –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —ç—Ç–æ–π —Ç–æ—á–∫–µ
					</li>
					<li>
						–û–Ω–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫: –¥–µ–π—Å—Ç–≤–∏—è, –Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º—ã–µ –∏ –ø—Ä–æ—Ö–æ–¥–∏–º—ã–µ
					</li>
					<li>
						–ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç –ø–æ ID
					</li>
					<li>
						–ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–∂–Ω–æ –ª–∏ –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–±—ä–µ–∫—Ç –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏—è
					</li>
				</ol>
			</div>
			<div>
				<img src="/pictures/go_to_reso.png" alt="" height="300px">
			</div>
		</div>
	</section>

	<section class="slide">
		<h2>#4 –î–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–æ–º</h2>
		<pre>
			<code><span class="keyword">const</span> objectInAction <span class="global">=</span> <span class="global">Objects</span>.get(ID)</code>
			<code><span class="keyword">const</span> hero <span class="global">=</span> <span class="global">Player</span>.activeHero</code>
			<code>objectInAction.events.dispatch(<span class="string">'action'</span>, hero)</code>
			<code class="comment">...</code>
			<code><span class="global">this</span>.events.on(<span class="string">'action'</span>, hero <span class="keyword">=></span> {</code>
			<code>    hero.owner.resources.set(<span class="string">'gems'</span>, <span class="global">this</span>.value)</code>
			<code>    <span class="global">this</span>.remove()</code>
			<code>})</code>
		</pre>
	</section>

	<section class="slide">
		<h2>#5 –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞</h2>
		<ol>
			<li>–£–¥–∞–ª—è–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É –∏–∑ —Ä–µ–Ω–¥–µ—Ä–∞</li>
			<li>–£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏</li>
			<li>–£–¥–∞–ª—è–µ–º –∏–∑ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —Å –∫–æ–æ–¥–∏–Ω–∞—Ç–∞–º–∏</li>
			<li>–£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π</li>
			<li>–£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤</li>
			<li>–û–±–Ω–æ–≤–ª—è–µ–º –º–∏–Ω–∏-–∫–∞—Ä—Ç—É, —É–∂–µ –±–µ–∑ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞</li>
			<li>–†–∞—Å—Å—ã–ª–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–µ–π—Ç–∞</li>
		</ol>
	</section>

	<section class="slide">
		<h2>–ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ —ç—Ç–∏ –º–∞—Å—Å–∏–≤—ã –±—ã—Å—Ç—Ä–µ–µ?</h2>
		<p>–î–æ–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –æ–∫–æ–ª–æ 10% –æ—Ç –≤—Å–µ—Ö. <br> –¢–∞–∫ –ø–æ—á–µ–º—É –±—ã –Ω–µ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ —Ä–∞—Å—á–µ—Ç–∞—Ö:</p>
		<pre>
			<code class="comment">// —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ä—Ç—ã, —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö</code>
			<code><span class="keyword">const</span> baseGrid <span class="global">=</span> <span class="keyword">new</span> Grid(mapSize)</code>
			<code class="comment">// –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ —á–∞—â–µ, –ø–æ—Ç–æ–º—É —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö</code>
			<code><span class="keyword">const</span> dynamicGrid <span class="global">=</span> <span class="keyword">new</span> Grid(mapSize)</code>
		</pre>
	</section>

	<section class="slide">
		<h2>–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã</h2>
		<pre>
			<code class="comment">// –û–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–∞—Ä–Ω–∏–∑–æ–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—Ç–∞–∫–æ–≤–∞–Ω</code>
			<code><i>@Mixin(Attacable)</i></code>
			<code><span class="keyword">class</span> TownObject <span class="keyword">extends</span> OwnershipObject {...}</code>
			<code class="comment">// –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ñ–ª–∞–∂–∫–∞, –µ–≥–æ —Å–º–µ–Ω—ã –∏ —Ç.–ø.</code>
			<code><span class="keyword">class</span> OwnershipObject <span class="keyword">extends</span> MapObject {...}</code>
			<code class="comment">// –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ –∫–∞—Ä—Ç—ã</code>
			<code><span class="keyword">class</span> MapObject {...}</code>
		</pre>
	</section>


	<section class="slide">
		<h2 class="shout shrink">–í—ã–≤–æ–¥—ã</h2>
	</section>

	<section class="slide black">
		<img class="cover" src="pictures/battle.jpg" alt="">
	</section>

	<section class="slide">
		<img class="cover" src="pictures/zachem.jpg" alt="">
	</section>

	<section class="slide">
		<h2>–ß—Ç–æ –º–Ω–µ —ç—Ç–æ –¥–∞–ª–æ</h2>
		<ol>
			<li>—Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</li>
			<li>–≤—ã—Ö–æ–¥—ã –∑–∞ —Ä–∞–º–∫–∏ –ø—Ä–∏–≤—ã—á–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –∑–∞–¥–∞—á</li>
			<li>—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫—Ä—É–≥–æ–∑–æ—Ä–∞</li>
			<li>–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å —Ñ–∞–Ω–∞—Ç–∏–∫–∞–º–∏</li>
		</ol>
	</section>

	<section class="slide">
		<h2>–ó–∞—á–µ–º –¥–µ–ª–∞—Ç—å –∏–≥—Ä—ã</h2>
		<ol>
			<li>–∫—É–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ —á–µ–º —Å–∞–π—Ç–∏–∫–∏</li>
			<li>—ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º—ã</li>
			<li>—ç—Ç–æ –∫—Ä–∞—Å–∏–≤–æ</li>
		</ol>
	</section>

	<section class="slide center">
		<br>
		<br>
		<h2>–°—Ç–µ–ø–µ–Ω—å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –≤–≥–ª—É–±—å</h2>
	</section>



	<section class="slide">
		<h2>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h2>
		<div><a href=""></a></div>
		<div>
			<a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">
				–ü—Ä–æ –ø–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –Ω–∞ JS
			</a>
		</div>
		<div>
			<a href="http://gameprogrammingpatterns.com/contents.html">
				–ö–Ω–∏–≥–∞ Game Programming Patterns –∏–∑ –∫–æ—Ç–æ—Ä–æ–π —è –º–Ω–æ–≥–æ–µ –≤—ã–Ω–µ—Å
			</a>
		</div>
		<div>
			<a href="http://qiao.github.io/PathFinding.js/visual/">
				–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ –≤ —Å–µ—Ç–∫–µ
			</a>
		</div>
		<div>
			<a href="https://vk.com/fizmig">
				FizMig. –¢–∞ —Å–∞–º–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –∏–≥—Ä–æ–≤—ã–º –º–µ—Ö–∞–Ω–∏–∫–∞–º –ì–µ—Ä–æ–µ–≤
			</a>
		</div>

	</section>

	<section class="slide center">
		<h2>–î–µ–º–∫–∞ –ì–µ—Ä–æ–µ–≤ 3 –≤ –±—Ä–∞—É–∑–µ—Ä–µ</h2>
		<h2><a href="http://homm.lekzd.ru/">http://homm.lekzd.ru/</a></h2>
		<img src="pictures/qr-code.gif" style="height: 300px" alt="">
	</section>

	<section class="slide">
		<h2 class="shout shrink">–í–æ–ø—Ä–æ—Å—ã</h2>
	</section>



	<footer class="badge">
		<a href="https://github.com/shower/shower">Fork me on GitHub</a>
	</footer>

	<div class="progress"></div>

	<script src="node_modules/shower-core/shower.min.js"></script>
	<!-- Copyright ¬© 2017 Yours Truly, Famous Inc. -->

</body>
</html>
